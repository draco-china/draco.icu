<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/code.svg" />
    <link rel="stylesheet" href="/umi.27fb2de8.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.26
    </script>
    <script
      crossorigin="anonymous"
      async="true"
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8911772601296047"
    ></script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <script>
      var _hmt = _hmt || [];
    </script>
    <script>
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?c601bdebcd89b7fc076d669b78e34c6a";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <title>性能指标和优化目标 - draco.icu</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/optimization/01-前端性能分析工具和指标" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="false" data-gapless="false"><div class="__dumi-default-navbar" data-mode="doc"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/code.svg&#x27;)" href="/">draco.icu</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="doc"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/code.svg&#x27;)" href="/"></a><h1>draco.icu</h1><p>I see you, 遇见你</p><p><object type="image/svg+xml" data="https://img.shields.io/github/stars/draco-china/draco.icu?style=social"></object></p></div><div class="__dumi-default-menu-mobile-area"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/reward">吐槽一下</a></li><li><a href="/">Hi there, 👋 I&#x27;m Draco! 😎</a></li><li><a href="/engineering">前端工程化</a><ul><li><a href="/engineering/01-前端代码规范"><span>前端代码规范</span></a></li><li><a href="/engineering/02-前端书籍推荐"><span>前端书籍推荐</span></a></li></ul></li><li><a aria-current="page" class="active" href="/optimization">前端性能优化</a><ul><li><a href="/optimization/00-前端性能优化认知"><span>前端性能优化认知</span></a></li><li><a aria-current="page" class="active" href="/optimization/01-前端性能分析工具和指标"><span>性能指标和优化目标</span></a></li><li><a href="/optimization/02-浏览器渲染机制"><span>浏览器渲染机制</span></a></li><li><a href="/optimization/03-渲染优化"><span>渲染优化</span></a></li><li><a href="/optimization/04-页面渲染性能优化"><span>页面渲染性能优化</span></a></li><li><a href="/optimization/05-静态资源优化"><span>静态资源优化</span></a></li><li><a href="/optimization/06-防抖、节流"><span>防抖、节流</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="性能指标和优化目标之：加载" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#性能指标和优化目标之加载"><span>性能指标和优化目标之：加载</span></a></li><li title="打开网站的初体验" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#打开网站的初体验"><span>打开网站的初体验</span></a></li><li title="保存快照" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#保存快照"><span>保存快照</span></a></li><li title="瀑布图 Waterfall" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#瀑布图-waterfall"><span>瀑布图 Waterfall</span></a></li><li title="性能指标和优化目标之：交互" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#性能指标和优化目标之交互"><span>性能指标和优化目标之：交互</span></a></li><li title="FPS 帧率、FRS" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#fps-帧率frs"><span>FPS 帧率、FRS</span></a></li><li title="用 RAIL 模型测量性能" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#用-rail-模型测量性能"><span>用 RAIL 模型测量性能</span></a></li><li title="1、响应" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#1响应"><span>1、响应</span></a></li><li title="2、动画" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#2动画"><span>2、动画</span></a></li><li title="3、空闲时间" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#3空闲时间"><span>3、空闲时间</span></a></li><li title="4、加载" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#4加载"><span>4、加载</span></a></li><li title="使用 Chrome DevTools 分析性能" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#使用-chrome-devtools-分析性能"><span>使用 Chrome DevTools 分析性能</span></a></li><li title="size：文件大小分析" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#size文件大小分析"><span>size：文件大小分析</span></a></li><li title="performance：性能表现" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#performance性能表现"><span>performance：性能表现</span></a></li><li title="Diable cache" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#diable-cache"><span>Diable cache</span></a></li><li title="模拟网络情况" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#模拟网络情况"><span>模拟网络情况</span></a></li><li title="Performance monitor" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#performance-monitor"><span>Performance monitor</span></a></li><li title="快捷键 ESC" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#快捷键-esc"><span>快捷键 ESC</span></a></li><li title="使用 LightHouse 分析性能" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#使用-lighthouse-分析性能"><span>使用 LightHouse 分析性能</span></a></li><li title="Lighthouse 介绍" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#lighthouse-介绍"><span>Lighthouse 介绍</span></a></li><li title="举例：确认某个 JS 是否必须在首屏加载" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#举例确认某个-js-是否必须在首屏加载"><span>举例：确认某个 JS 是否必须在首屏加载</span></a></li><li title="通过 npm 运行 Lighthouse 工具" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#通过-npm-运行-lighthouse-工具"><span>通过 npm 运行 Lighthouse 工具</span></a></li><li title="使用 WebPageTest 评估网站性能" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#使用-webpagetest-评估网站性能"><span>使用 WebPageTest 评估网站性能</span></a></li><li title="WebPageTest 使用" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#webpagetest-使用"><span>WebPageTest 使用</span></a></li><li title="WebPageTest 报告分析" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#webpagetest-报告分析"><span>WebPageTest 报告分析</span></a></li><li title="局域网部署 WebPageTest 工具" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#局域网部署-webpagetest-工具"><span>局域网部署 WebPageTest 工具</span></a></li><li title="chrome 插件：PageSpeed Insights" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#chrome-插件pagespeed-insights"><span>chrome 插件：PageSpeed Insights</span></a></li><li title="实时动态测量性能的 API" data-depth="2"><a href="/optimization/01-前端性能分析工具和指标#实时动态测量性能的-api"><span>实时动态测量性能的 API</span></a></li><li title="performance：获取常见性能参数" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#performance获取常见性能参数"><span>performance：获取常见性能参数</span></a></li><li title="观察长任务" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#观察长任务"><span>观察长任务</span></a></li><li title="页面可见性的状态监听" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#页面可见性的状态监听"><span>页面可见性的状态监听</span></a></li><li title="网络状况监听" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#网络状况监听"><span>网络状况监听</span></a></li><li title="检测元素的可见状态，做曝光埋点" data-depth="3"><a href="/optimization/01-前端性能分析工具和指标#检测元素的可见状态做曝光埋点"><span>检测元素的可见状态，做曝光埋点</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="性能指标和优化目标之加载"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#性能指标和优化目标之加载"><span class="icon icon-link"></span></a>性能指标和优化目标之：加载</h2><p>性能指标：我们在性能优化过程中可以参考的标准。这些标准都是业界或者前人总结出来的指导性经验。我们可以参考这些指标，去指导我们自己的优化。</p><h3 id="打开网站的初体验"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#打开网站的初体验"><span class="icon icon-link"></span></a>打开网站的初体验</h3><p>我们以淘宝网站为例，按下 F12 打开浏览器的调试模式。</p><p><img src="/static/20210115_1601.4ff600ca.png" alt=""/></p><p>上图中，鼠标右键点击“刷新”图标（或者鼠标长按刷新图标，松开鼠标后），会弹出三个选项，我们选择最后一个选项“清空缓存并硬性重新加载”。</p><p>补充：这三个选项都是在调试模式下（按下 F12 弹出调试面板）才会出现的。</p><p>浏览器的 DevTools 初印象：</p><p><img src="/static/20210115_1617.4b60f10f.png" alt=""/></p><p>上图中，打开 chrome 调试工具，点开「设置」icon，下面的四个选项中，除了“Group by frame”之外，其他的三个选项都可以勾选上。</p><p>我们可以看到淘宝网站的一些指标：</p><ul><li>总资源量是 1.3M。</li><li>DOM 加载完成时间（DOMContentLoaded）：511ms。这是一个很关键的指标。</li><li>其他资源的总加载时间是 1.05 秒。</li></ul><p>我们再来对比一下京东的：</p><p><img src="/static/20210116-1357.95755593.png" alt=""/></p><h3 id="保存快照"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#保存快照"><span class="icon icon-link"></span></a>保存快照</h3><p>network 里的信息挺多，我们可以将其保存下来，留着以后做分析、做对照。</p><p><img src="/static/20210115-1723.0ddce4fe.png" alt=""/></p><p>如上图所示，我们可以在 network 的空白处右键，选择“Save all as HAR with content”，将 network 信息保存为 <strong>HAR</strong>文件格式。</p><p><strong>HAR 是一种标准的 Web 格式，用户保存性能测试的结果。里面的数据是 json 格式。</strong></p><p>我们可以使用第三方的 HAR 分析软件来打开 HAR 文件，比如：</p><ul><li><p><a target="_blank" rel="noopener noreferrer" href="https://toolbox.googleapps.com/apps/har_analyzer/?lang=zh-CN">Google 提供的 HAR 分析器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p>Fiddler 抓包工具</p></li></ul><p>注意，HAR 文件包含了一些敏感信息：</p><p><img src="/static/20210115-1733.28cd36e9.png" alt=""/></p><h3 id="瀑布图-waterfall"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#瀑布图-waterfall"><span class="icon icon-link"></span></a>瀑布图 Waterfall</h3><p><img src="/static/20210115_1618.7b977411.png" alt=""/></p><p>瀑布图可以非常直观地把网站的加载过程，用自上而下的方式表达出来，就像瀑布一样。</p><p>瀑布图有两中解读方式：一种是横向看，一种是纵向看。</p><p><strong>1、横向看</strong>：</p><p>横向看的是具体的资源，每一行代表某个资源的加载信息。里面有一些色块来表达加载的过程，每个块的颜色不同。也就是说资源的下载不是单一的过程，而是经历了很多环节。</p><p>为了了解资源的具体加载过程，我们把鼠标悬浮在第一个资源的色块上，可以看见一个详情列表：</p><p><img src="/static/20210115_1632.50756d87.png" alt=""/></p><p>（1）等待：</p><ul><li>Queueing：排队。浏览器会对资源的请求做优先级排序。</li></ul><p>（2）连接：</p><ul><li><p>DNS Lookup：DNS 域名解析。每个资源都有域名，对域名做 DNS 解析，然后找到对应服务器的 IP 地址。</p></li><li><p>initial connection：客户端和服务器之间建立 TCP 连接。</p></li><li><p>SSL 证书：该网站为了保证安全性，使用了 https 协议，启用了 SSL 证书。启用之后，需要做安全认证（SSL 协商），这个过程也会耗时。到这里位置，我们可以看到，在请求资源之前，有很多的前置步骤。</p></li></ul><p>（3）请求和响应：</p><ul><li><p>Request sent：到这一步，真正开始请求资源。</p></li><li><p>Waiting（<strong>TTFB</strong>）：资源从请求到响应，有一个等待的时间。</p></li><li><p>Content Download：收到响应后，资源的下载时间。如果值越大，表明下载时间越长。有些同步加载的资源会造成阻塞，导致网页的整体加载时间过长，让用户等待太久。</p></li></ul><p><strong>TTFB</strong> 是一个很重要的指标，它表示的是：请求发出到响应，到底要经历多久。TTFB 可以给我们一个很直观的感受，我们网站的请求和响应到底是快还是慢，很大程度上是由 TTFB 决定。</p><p>影响 TTFB 的因素是什么呢？比如：</p><ul><li><p>后台的处理能力的响应速度。</p></li><li><p>网络状况：是否有网络延迟。</p></li></ul><p><strong>2、纵向看</strong>：（主要看两点）</p><p>（1）看资源与资源之间的联系：如果发生阻塞，说明资源可能是串行地按顺序加载。可以<strong>按需要适当调整为并行</strong>。</p><p>（2）看关键的时间节点。Waterfall 中有<strong>两根时间线</strong>：蓝色的线是 DOM 加载完成的时间，红色的线是所有资源加载完成的时间。</p><h2 id="性能指标和优化目标之交互"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#性能指标和优化目标之交互"><span class="icon icon-link"></span></a>性能指标和优化目标之：交互</h2><p>上面的内容讲的是<strong>加载</strong>的性能，还有一个需要关注的性能指标是<strong>交互</strong>。也就是网站加载完成后，用户真正开始使用这个网站过程中的的交互体验。</p><p>关于交互体验的性能，我们需要关注的是：</p><ul><li><p>交互动作的<strong>响应时间</strong>要短：比如点击按钮后的弹窗、在搜索框里输入关键字后的搜索结果。</p></li><li><p>页面滚动要流畅：可以查看 FPS 帧率。</p></li><li><p>异步请求接口的完成时间要短：比如关注/取关主播的响应、领取红包的操作。</p></li></ul><h3 id="fps-帧率frs"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#fps-帧率frs"><span class="icon icon-link"></span></a>FPS 帧率、FRS</h3><p>这里首先科普两个概念：</p><ul><li>刷新率：显示器每秒有多少帧画面。大多数显示器的刷新率是 60 帧/秒（即 60hz）。</li><li>帧率（FPS：frames per second）：视频或者动画的内容本身，每秒有多少帧。由显卡输出帧率。</li></ul><p>上面的两个参数中，不要把「刷新率」和「帧率」弄混了。「刷新率」是屏幕的参数，「帧率」是图像、视频等内容的参数。人眼最终看到的效果，是以最低的参数为准的。</p><p>目前，市场主流手机和电脑屏幕的刷新率基本都是 60Hz，即每秒显示 60 帧画面。也就是说，当我们在使用手机的时候，本质上是手机在连续播放一张张静态图片，每秒播放 60 张，让肉眼误认为眼前的画面在动。</p><p><img src="/static/20210107_2115.03972f42.gif" alt=""/></p><p>持续滑动的过程中，如果页面输出到显示器的帧率低于 60 帧/秒，则人眼会感觉卡顿。</p><p>那么，在浏览器中如何实时显示内容的 FPS 参数呢？打开浏览器的控制台后，按住快捷键「Cmd + Shift + P」，然后输入 <code>frame</code>，选择<code>Show frames per second（FPS） meter</code>。如下：</p><p><img src="/static/20210115-1930.f6d1432b.png" alt=""/></p><p><img src="/static/20210115-2146.c2cf9c81.png" alt=""/></p><p><strong>温馨提示</strong>：</p><p>从 2020 年 7 月起，chrome 官方已经取消了 fps 参数的显示，改为了 <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/addyosmani/status/1281483292026400768">FRS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p><p><img src="/static/20210115-2006.909f82d3.png" alt=""/></p><p>FRS 参数观察的是丢帧率：</p><p><img src="/static/20210115-2010.8e6812be.png" alt=""/></p><p>Chrome 官方给我们提供了下面这个网站，用于观察 FPS 效果：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="http://googlesamples.github.io/web-fundamentals/tools/chrome-devtools/rendering-tools/forcedsync.html">http://googlesamples.github.io/web-fundamentals/tools/chrome-devtools/rendering-tools/forcedsync.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>如果实在想要看 fps，我们可以借助第三方的 <a target="_blank" rel="noopener noreferrer" href="">chrome 插件</a>来查看 fps 参数。</p><h2 id="用-rail-模型测量性能"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#用-rail-模型测量性能"><span class="icon icon-link"></span></a>用 RAIL 模型测量性能</h2><p>RAIL 模型是 Google 提出的可以量化性能的测量<strong>标准</strong>。我们做性能优化时，要尽可能到这个标准。</p><p>在做性能优化的时候，我们需要有人告诉我们：做到多好才算好？有没有一些通用的标准？而 RAIL 模型 可以给我们带来量化的指标。</p><p><strong>RAIL 模型包括四个方面</strong>：</p><p><img src="/static/20210115-2027.5ff828b6.png" alt=""/></p><ul><li><p>Response：响应</p></li><li><p>Animation：动画</p></li><li><p>Idle：空闲时间</p></li><li><p>load：加载</p></li></ul><p>参考链接：</p><ul><li><p><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6872474167543857165">[Web 翻译]用 RAIL 模型测量性能<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p><a target="_blank" rel="noopener noreferrer" href="https://web.dev/rail/">https://web.dev/rail/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul><p><strong>RAIL 的目标</strong>：</p><ul><li>让良好的用户体验成为性能优化的目标</li></ul><p>接下来，我们再看看看 RAIL 的评估标准。</p><h3 id="1响应"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#1响应"><span class="icon icon-link"></span></a>1、响应</h3><p><strong>目标</strong>：处理用户发起的响应，应该在 50ms 内完成。</p><p><strong>准则</strong>：</p><ul><li><p>在 50 毫秒内处理用户输入事件。这适用于大多数输入，如点击按钮、切换表单控件或启动动画。这不适用于触摸拖动或滚动。</p></li><li><p>对于需要超过 50 毫秒才能完成的操作，需要提供反馈。</p></li></ul><p><img src="/static/20210115-2039.90f7379d.png" alt=""/></p><p>如上图所示，Google 经过大量研究发现，用户能够接受的最高延时是 100ms。所以，从用户发起交互请求（输入任务）后，前端最好能在 100ms 内给出反馈。</p><p><strong>但是我们的预算只有 50 毫秒</strong>。因为应用程序在接收到输入任务的时候，不一定会马上着手处理，它可能还有其他工作正在进行，这意味着当前的输入任务可能需要排队 50ms 左右。所以我们真正能处理这个请求的时间，并没有 100ms。</p><h3 id="2动画"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#2动画"><span class="icon icon-link"></span></a>2、动画</h3><p><strong>目标</strong>：在 10 毫秒或更短的时间内制作出动画中的每一帧。（即：100 帧/秒。）</p><p>我们知道，当动画的帧率是 &gt;= 60 帧/秒 的时候，人眼才不会觉得卡顿。此时的理论值为 1000 毫秒/60 帧 = 16.6 毫秒/帧。</p><p>10 毫秒和 16 毫秒之间，隔了 6 秒。这 6 秒是什么呢？因为浏览器需要大约 6 毫秒的时间来渲染每一帧，所以，每一帧的准则建议是 10 毫秒，而不是 16.6 毫秒。</p><p>假设动画本身是 60 帧/秒，那么，最终渲染出来的效果可能只有 45 帧/秒。</p><p><strong>广义的动画</strong>：</p><p>动画不仅仅是花哨的 UI 效果。每一种交互都被认为是动画。比如：</p><ul><li><p>视觉动画</p></li><li><p>滚动</p></li><li><p>拖动、平移元素、放大图片等。</p></li></ul><h3 id="3空闲时间"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#3空闲时间"><span class="icon icon-link"></span></a>3、空闲时间</h3><p><strong>目标</strong>：最大化闲置时间，增加页面在 50 毫秒内响应用户输入的几率。</p><p>这个空闲时间，是和上面的第一点“响应”是结合在一起的。只有空闲足够多，当用户的交互来的时候，我们才能有足够的时间进行处理。</p><p><strong>准则</strong>：</p><ul><li><p>利用空闲时间做延迟加载。例如，页面在初始化的时候，尽可能少的加载数据，然后利用空闲时间加载其余部分。</p></li><li><p>在空闲时间内处理任务，时间不能超过 50 毫秒。否则，就阻塞了用户做其他的输入请求，导致卡顿。</p></li><li><p>如果用户在闲置时间工作期间与页面进行交互，那么这个交互应始终处于最高优先级，并中断闲置时间工作。</p></li></ul><h3 id="4加载"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#4加载"><span class="icon icon-link"></span></a>4、加载</h3><p><strong>目标</strong>：在 5 秒或更短的时间内加载页面并可以交互。</p><p><strong>准则</strong>：</p><ul><li><p>这里的 5 秒包括：加载、解析、渲染，并确保用户可以交互。</p></li><li><p>加载的过程中，可以使用 loading 框、进度条、骨架屏等方式缓解用户焦虑。</p></li></ul><h2 id="使用-chrome-devtools-分析性能"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#使用-chrome-devtools-分析性能"><span class="icon icon-link"></span></a>使用 Chrome DevTools 分析性能</h2><p>现在主流的性能测量工具：</p><ul><li><p>Chrome DevTools：开发调试、分析性能。</p></li><li><p>Lighthouse 网站整体质量评估。</p></li><li><p>WebPageTest：给网站提供多个地点的测试，以及全面的性能报告。</p></li></ul><p>这一段，我们先来讲一讲 Chrome DevTools 。</p><p>大家平时在用 Chrome DevTools 的时候，一般使用来开发调试、查看 DOM、css、接口请求等，但其实，这个工具非常强大。</p><h3 id="size文件大小分析"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#size文件大小分析"><span class="icon icon-link"></span></a>size：文件大小分析</h3><p><img src="/static/20210116-0946.df83d26d.png" alt=""/></p><p>可以把 size 从到小排序，看看哪个资源的文件较大。</p><p>另外，上图中的横线处说明：该文件在网络传输的时候会做压缩（125kb），拿到资源之后再解压还原（526kb）。</p><h3 id="performance性能表现"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#performance性能表现"><span class="icon icon-link"></span></a>performance：性能表现</h3><p><img src="/static/20210116-0959.461d7a75.png" alt=""/></p><p>preformance 的两个作用：</p><ul><li>Record button：记录页面加载、用户交互等全过程，直到我们手动点击停止按钮。</li><li>Reload button：记录页面从刷新到资源加载完成的过程。会自动停止记录。</li></ul><p>参数解读：</p><ul><li><p>Timing：关键的时间节点。</p></li><li><p>Main：主线程做了哪些任务，以及调用关系。</p></li></ul><p>Timing 参数中，尤其注意看<code>DCL</code>（DOMContentLoaded），即 DOM 加载完成的时间节点。我们可以通过<code>Main</code>参数看看 DOM 在加载完成之前，都做了些什么事情。很有可能就是这些事情导致 <code>DCL</code>的时间过晚。</p><p>我们可以翻到<code>Main</code>里的最后一行（即最终调用的位置），往往这个位置就是我们自己写的代码。</p><h3 id="diable-cache"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#diable-cache"><span class="icon icon-link"></span></a>Diable cache</h3><p><img src="/static/20210116-1014.255dd6d2.png" alt=""/></p><p>上图中的<code>Diable cache</code>是一个很重要的设置选项。</p><p>勾选<code>Diable cache</code>：</p><ul><li>不走缓存，相当于页面初次访问。</li><li>如果你希望改的代码立即生效，就一定要勾选上。</li></ul><p>不勾选<code>Diable cache</code>：</p><ul><li>走缓存，相当于页面二次、三次访问。</li><li>很多时候，我们需要关心用户在第二次、第三次访问时候，他的访问速度如何、性能如何、我们设置的缓存有没有生效。此时就不要勾选上。</li></ul><h3 id="模拟网络情况"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#模拟网络情况"><span class="icon icon-link"></span></a>模拟网络情况</h3><p><img src="/static/20210116-1023.56a7ac97.png" alt=""/></p><p>模拟网络状况（自定义参数）：</p><p><img src="/static/20210116-1026.680bdc95.png" alt=""/></p><h3 id="performance-monitor"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#performance-monitor"><span class="icon icon-link"></span></a>Performance monitor</h3><p><img src="/static/20210116-1032.620e752b.png" alt=""/></p><h3 id="快捷键-esc"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#快捷键-esc"><span class="icon icon-link"></span></a>快捷键 ESC</h3><p>按住快捷键 ESC，会列出其他常用的功能菜单：</p><p><img src="/static/20210116-1028.71c56a29.png" alt=""/></p><h2 id="使用-lighthouse-分析性能"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#使用-lighthouse-分析性能"><span class="icon icon-link"></span></a>使用 LightHouse 分析性能</h2><p>我们之所以使用不同的性能测量工具，是因为他们都有不同的特点。这一段要讲的 lighthouse 既可以帮我们生成简易的测试报告，还可以给出一些针对性的优化建议。后面要讲的 WebPageTest 可以帮我们生成详细的性能测试报告。</p><p>我们先来看看 Lighthouse。</p><h3 id="lighthouse-介绍"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#lighthouse-介绍"><span class="icon icon-link"></span></a>Lighthouse 介绍</h3><p><img src="/static/20210115-1739.d268c022.png" alt=""/></p><p>lighthouse 是 chrome 浏览器的一个性能测量工具。我们先来看看它的性能指标，至于它具体使用，后续的内容再详细介绍。</p><p>淘宝跑分举例：</p><p><img src="/static/20210115-1758.b123016d.png" alt=""/></p><p>京东跑分举例：</p><p><img src="/static/20210115-1759.a0456ac4.png" alt=""/></p><p>Lighthouse 跑分里，最重要的两个指标如下：</p><ul><li><p><strong>First Contentful Paint（白屏时间）</strong>：**从白屏到第一次出现内容的时间。**我们可以看到，上面提供了一些加载过程的截图，10 屏里如果只有 1 到 2 屏是白屏，说明体验还是可以的。</p></li><li><p><strong>Speed Index</strong>：速度指数。</p></li></ul><p>我们不需要关心这个指数是怎么来的，因为背后涉及一套很复杂的公式，我们暂时只需关注这个数值。</p><p>Speed Index 标准为 4 秒（超过 4 秒算比较慢的），我们测的淘宝的 speed index 是 0.5s，很快了。但我们要结合网站本身的业务来<strong>权衡</strong>。并不是分数越高性能越高，比如百度这样的网站，页面上的内容很少，测出来的分数肯定很完美。而淘宝需要展示很多内容给用户看。所以，这个指标只是一个指导作用，并不一定能够达到最优的数值。</p><p>Lighthouse 的分析结果里，也给出了颜色标注：</p><ul><li>红色：比较严重的性能问题</li><li>黄色：需要做适当优化</li><li>绿色：说明性能表现很好。</li></ul><p>另外，Lighthouse 还会给出一些优化建议：</p><ul><li><p>Opportunities:优化建议。</p></li><li><p>Diagnostics：问题诊断。</p></li><li><p>Passed audits：表示这部分没有问题。</p></li></ul><h3 id="举例确认某个-js-是否必须在首屏加载"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#举例确认某个-js-是否必须在首屏加载"><span class="icon icon-link"></span></a>举例：确认某个 JS 是否必须在首屏加载</h3><p>就拿 B 站来举例，来看看它的 lighthouse 报告：</p><p><img src="/static/20210116_0107.28a746eb.png" alt=""/></p><p>上图中给出了一个优化建议：有些 JS 文件不是首屏加载必须的。</p><p><img src="/static/20210116_0108.29270f31.png" alt=""/></p><p>我们随便拿一个 JS 文件来测试（比如上图中，Header 标签里的 JS 文件）。做法如下：</p><p><img src="/static/20210116-0901.99b659aa.png" alt=""/></p><p>如上图所示，在 chrome 控制台输入快捷键「Cmd + Shift + P」，然后输入文本<code>block</code>，选择<code>Show Network request blocking</code>：</p><p><img src="/static/20210116-0903.955a64f7.png" alt=""/></p><p>按照上面的步骤添加规则，点击 add 后，效果如下：</p><p><img src="/static/20210116-0904.bbcc95d6.png" alt=""/></p><p>然后，我们切换到控制台的 network 面板，并刷新页面：</p><p><img src="/static/20210116-0905.7f45ced9.png" alt=""/></p><p>然后观察这个 js 资源是不是首屏加载所必须的。但我们也不能就此定论说这个资源一定可以延迟加载，也许它就是想让页面在一开始 loading 的时候就捕获日志。</p><p>对于我们自己的网站，这个资源是首屏加载必须的吗？一定要在第一时间加载吗？需要根据特定的业务做衡量。</p><h3 id="通过-npm-运行-lighthouse-工具"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#通过-npm-运行-lighthouse-工具"><span class="icon icon-link"></span></a>通过 npm 运行 Lighthouse 工具</h3><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># 安装</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">npm</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"> -g lighthouse</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 执行</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">lighthouse https://www.jd.com</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 输出性能检测报告</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">Generating results</span><span class="token punctuation">..</span><span class="token plain">.</span></div><div class="token-line"><span class="token plain">html output witten to /Users/smyh/Documents/wpt-mac-agent/www.jd.com._2021-01-16_09-00-00.html</span></div></pre></div><h2 id="使用-webpagetest-评估网站性能"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#使用-webpagetest-评估网站性能"><span class="icon icon-link"></span></a>使用 WebPageTest 评估网站性能</h2><p>程序员经常说的有句话是：“我这儿能打开啊。我这儿不报错呀。”大家应该都懂这个梗，这就是为什么，我们要借助第三方的测试工具，而不仅仅只是自己电脑上访问正常就 ok 了。</p><p>我们需要借助 WebPageTest 这样的第三方测试工具，去模拟各种用户的真实场景。</p><h3 id="webpagetest-使用"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#webpagetest-使用"><span class="icon icon-link"></span></a>WebPageTest 使用</h3><p>网址：<a target="_blank" rel="noopener noreferrer" href="https://www.webpagetest.org/">https://www.webpagetest.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><img src="/static/20210115-2203.d49b7feb.png" alt=""/></p><p>WebPageTest 在世界各地提供了非常多的服务器，在每个服务器上部署了不同的浏览器，可以让我们有针对性的做测试。如果你做的是一款国际化网站，那更有必要使用一下了。</p><p>我们以 JD 网站举例：</p><p><img src="/static/20210115-2225.ee261961.png" alt=""/></p><p>按照上面的选项配置完成后，点击右侧的「Start Test」即可开始测试。然后等待：</p><p><img src="/static/20210115-2226.22f6bfe4.png" alt=""/></p><h3 id="webpagetest-报告分析"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#webpagetest-报告分析"><span class="icon icon-link"></span></a>WebPageTest 报告分析</h3><p>淘宝网站性能测试报告：</p><ul><li><p>2020 年 6 月：<a target="_blank" rel="noopener noreferrer" href="https://webpagetest.org/result/200616_JK_78eebda338285ffe0c2e154ca5032839/">https://webpagetest.org/result/200616_JK_78eebda338285ffe0c2e154ca5032839/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p>2021 年 1 月：<a target="_blank" rel="noopener noreferrer" href="https://www.webpagetest.org/result/210115_DiCB_f1344d732760365151755e89765b2d37/">https://www.webpagetest.org/result/210115_DiCB_f1344d732760365151755e89765b2d37/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul><p>JD 网站性能测试报告：</p><ul><li>2021 年 1 月：<a target="_blank" rel="noopener noreferrer" href="https://www.webpagetest.org/result/210115_DiGT_8d7370e91230b7d077e40b7aafb485a5/">https://www.webpagetest.org/result/210115_DiGT_8d7370e91230b7d077e40b7aafb485a5/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>拿到 WebPageTest 报告之后，我们来看看报告里的几个重点指标。</p><p><img src="/static/20210116_1314.ad6242c6.png" alt=""/></p><p>1、摘要里的参数：（如上图）</p><ul><li>First Byte：第一个请求的响应时间。可以反映后台的处理能力，以及网络回路的情况。</li><li>Start Render：从白屏到首次渲染的时间。</li><li>Speed Index：速度指数。</li><li><strong>Total Blocking Time</strong>：页面被阻塞，导致用户不能交互的累计时间。</li></ul><p><img src="/static/20210116_1315.0a36614c.png" alt=""/></p><p>2、详情里的参数：<strong>First View</strong>。</p><p>First View 展示的是：首次访问时，总的加载时间。这里面提供的瀑布图，比 chrome DevTools 里提供的更为详细。</p><p>点击进入 First View 的详情之后，可以看到：所有的资源请求，都会在这里列出来。如下：</p><p><img src="/static/20210116_1316.88a53646.png" alt=""/></p><ul><li>page is Interactive：页面在加载的过程中，大部分时间段，用户都是可以交互的。这是非常有用的一个指标。</li><li>Brower Main thread：浏览器主线程的占用情况。可以看看空闲的时间多不多。</li><li>CPU Utilization：CPU 的使用情况。</li><li>多张图片的资源请求。</li></ul><p><img src="/static/20210116_1317.67856db8.png" alt=""/></p><p>上图中，我们可以看到：多张图片的开始请求时间都是相同的。也就是说，如果让资源做<strong>并行加载</strong>，我们就可以加大地减少加载时间，<strong>最终所消耗的时间就由最大的图片来决定</strong>。这是一个很好的优化技巧，至于具体是怎么实现的，可以自行了解。</p><p>另外，我们看到，有一部分的请求，被高亮出来了：</p><p><img src="/static/20210115-2250.9f5acc86.png" alt=""/></p><p>上面这张图的意思是：302 表示重定向，也就是说，这个资源已经不在原来请求的位置了，需要重定向才能找到真实的位置。这个地方其实可以做一个优化：</p><blockquote><p>不需要去访问之前的无效的资源，可以直接去访问重定向后的那个资源。</p></blockquote><h3 id="局域网部署-webpagetest-工具"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#局域网部署-webpagetest-工具"><span class="icon icon-link"></span></a>局域网部署 WebPageTest 工具</h3><p>如果我们开发的页面，还没有上线，公网则无法访问。这个时候我们也想通过 WebPageTest 看看网站的性能，那要怎么办呢？</p><p>我们可以在局域网部署 WebPageTest 工具，具体方法可自行研究。</p><h2 id="chrome-插件pagespeed-insights"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#chrome-插件pagespeed-insights"><span class="icon icon-link"></span></a>chrome 插件：PageSpeed Insights</h2><p>另外，google 官方也有一个网址：<a target="_blank" rel="noopener noreferrer" href="https://developers.google.com/speed/pagespeed/insights/?hl=zh-cn">https://developers.google.com/speed/pagespeed/insights/?hl=zh-cn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>但是这个网站在使用时，经常挂掉。</p><p>这个插件是 2018 年的，已经好几年没更新了。大家参考即可。</p><h2 id="实时动态测量性能的-api"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#实时动态测量性能的-api"><span class="icon icon-link"></span></a>实时动态测量性能的 API</h2><p>Chrome DevTools 能够检测各种性能参数，其实也是调用了一些性能相关的标准 API。我们自己也可以直接在代码里调用这些 api。</p><p>通过 <code>performance</code>对象提供的 API，我们可以实时的、精细化、自定义测量性能，获取相应的参数。也可以把这些性能参数，打印到控制台，或者实时上报给后台监控系统。</p><h3 id="performance获取常见性能参数"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#performance获取常见性能参数"><span class="icon icon-link"></span></a>performance：获取常见性能参数</h3><p>常见性能参数，计算公式如下：</p><blockquote><p>时间戳 1 减去时间戳 2，得到的差值，就是我们想要看到的耗时。</p></blockquote><ul><li><p>DNS 解析耗时: domainLookupEnd - domainLookupStart</p></li><li><p>TCP 连接耗时: connectEnd - connectStart</p></li><li><p>SSL 安全连接耗时: connectEnd - secureConnectionStart</p></li><li><p>网络请求耗时 (TTFB): responseStart - requestStart</p></li><li><p>数据传输耗时: responseEnd - responseStart</p></li><li><p>DOM 解析耗时: domInteractive - responseEnd</p></li><li><p>资源加载耗时: loadEventStart - domContentLoadedEventEnd</p></li><li><p>First Byte 时间: responseStart - domainLookupStart</p></li><li><p>白屏时间: responseEnd - fetchStart</p></li><li><p>首次可交互时间（<strong>TTI</strong>）: domInteractive - fetchStart</p></li><li><p>DOM Ready 时间: domContentLoadEventEnd - fetchStart</p></li><li><p>页面完全加载时间: loadEventStart - fetchStart</p></li><li><p>http 头部大小： transferSize - encodedBodySize</p></li><li><p>重定向次数：performance.navigation.redirectCount</p></li><li><p>重定向耗时: redirectEnd - redirectStart</p></li></ul><p>比如说，如果我们想要获取 TTI 参数，代码可以这样写：</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// 计算一些关键的性能指标</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;load&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// Time to Interactive</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> timing </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">&#x27;navigation&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">timing</span><span class="token punctuation">.</span><span class="token property-access">domInteractive</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">timing</span><span class="token punctuation">.</span><span class="token property-access">fetchStart</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> diff </span><span class="token operator">=</span><span class="token plain"> timing</span><span class="token punctuation">.</span><span class="token property-access">domInteractive</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> timing</span><span class="token punctuation">.</span><span class="token property-access">fetchStart</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;TTI: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> diff</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 打印 TTI 参数</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h3 id="观察长任务"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#观察长任务"><span class="icon icon-link"></span></a>观察长任务</h3><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> observer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token plain"> entry </span><span class="token keyword">of</span><span class="token plain"> list</span><span class="token punctuation">.</span><span class="token method function property-access">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">entry</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">observer</span><span class="token punctuation">.</span><span class="token method function property-access">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">entryTypes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;longtask&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h3 id="页面可见性的状态监听"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#页面可见性的状态监听"><span class="icon icon-link"></span></a>页面可见性的状态监听</h3><p>使用场景举例：</p><ul><li>比如说，我们正在做一个视频网站（或者游戏页面）。如果用户当前没有在看这个视频，而是切换别的页面了。此时，我们可以对视频做节流等处理，避免造成性能的浪费。等用户再回到当前页面之后，再恢复之前的状态。</li><li>当设备进入待机模式时（用户按下电源键关闭屏幕），网站想要关闭设备声音。</li></ul><p>针对这种场景，我们可以使用<code>visibilitychange</code>进行监听：</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// 见面可见性的状态监听</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> vEvent </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;visibilitychange&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">webkitHidden</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// webkit prefix detected</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  vEvent </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;webkitvisibilitychange&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">visibilityChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">hidden</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">webkitHidden</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Web page is hidden.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Web page is visible.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token plain">vEvent</span><span class="token punctuation">,</span><span class="token plain"> visibilityChanged</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h3 id="网络状况监听"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#网络状况监听"><span class="icon icon-link"></span></a>网络状况监听</h3><p>使用场景举例：</p><ul><li>高清图片按需加载：如果用户的网络条件较好，就加载高清图片资源；如果网络条件不好，就加载文件较小的图片资源。</li></ul><p>代码举例：</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> connection </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">connection</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">mozConnection</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">webkitConnection</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> type </span><span class="token operator">=</span><span class="token plain"> connection</span><span class="token punctuation">.</span><span class="token property-access">effectiveType</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">updateConnectionStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// type是之前的网络状态，connection.effectiveType是当前最新的网络状态</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;Connection type changed from &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27; to &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> connection</span><span class="token punctuation">.</span><span class="token property-access">effectiveType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  type </span><span class="token operator">=</span><span class="token plain"> connection</span><span class="token punctuation">.</span><span class="token property-access">effectiveType</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">connection</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;change&#x27;</span><span class="token punctuation">,</span><span class="token plain"> updateConnectionStatus</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>打印结果举例：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">Connection type changed from 4g to 3g</span></div></pre></div><h3 id="检测元素的可见状态做曝光埋点"><a aria-hidden="true" tabindex="-1" href="/optimization/01-前端性能分析工具和指标#检测元素的可见状态做曝光埋点"><span class="icon icon-link"></span></a>检测元素的可见状态，做曝光埋点</h3><p>我们可以通过<code>IntersectionObserver：</code>这个 API 来检测元素的可见状态：</p><p><img src="/static/20210117_1635.81b5ca67.png" alt=""/></p><p>做曝光上报的埋点：判断某个 DOM（或者某个楼层）是否出现在视窗中，出现了就收集数据上报给服务端。</p><p>本质就是要计算某一元素和另一元素（视窗）的相对位置/相对可视状态，然后进行一些操作（一般是上报给服务端）。</p><p>参考：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://cnodejs.org/topic/5e0a0edb0696c446bf650dec">前端埋点之曝光实现<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/Hugohui/vueTrackSdk">点击埋点和曝光卖点的封装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/draco-china/draco.icu/edit/main/docs/optimization/01-前端性能分析工具和指标.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">6/29/2022 11:30:19</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-176586322-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/umi.fe80aa56.js"></script>
    <script src="/docs__optimization__01-前端性能分析工具和指标.md.c1f0d583.async.js"></script>
  </body>
</html>
